---
import { useTranslations } from "../libs/i18n";
import { Image } from "astro:assets";

const { t, l, getCollection } = useTranslations(Astro.url);

const newsItems = await getCollection("news");
---

<section class="bg-base-200 py-16">
    <div class="container mx-auto px-4">
        <div class="mb-12 text-center">
            <h2 class="text-base-content mb-4 text-3xl font-bold md:text-4xl">
                {
                    t({
                        ja: "最新ニュース",
                        en: "Latest News",
                        zh: "最新消息",
                        ko: "최신 뉴스",
                    })
                }
            </h2>
            <p class="text-base-content/80 mx-auto max-w-3xl text-lg">
                {
                    t({
                        ja: "OUS Metaverseの最新情報をお届けします。",
                        en: "Get the latest information about OUS Metaverse.",
                        zh: "获取有关OUS Metaverse的最新信息。",
                        ko: "OUS Metaverse의 최신 정보를 제공합니다.",
                    })
                }
            </p>
        </div>

        <div class="grid gap-8 md:grid-cols-2 lg:grid-cols-3">
            {
                newsItems.slice(0, 3).map((news) => (
                    <a
                        href={l(`/activities/${news.slug}`)}
                        class="card bg-base-100 group shadow-md transition hover:shadow-lg"
                    >
                        <figure class="aspect-[16/9] overflow-hidden">
                            <Image
                                src={news.data.image}
                                alt={news.data.title}
                                class="h-full w-full object-cover transition-transform duration-300 group-hover:scale-105"
                            />
                        </figure>
                        <div class="card-body p-6">
                            <p class="text-sm opacity-70">
                                {new Date(news.data.date).toLocaleDateString(
                                    Astro.currentLocale || "ja-JP",
                                    {
                                        year: "numeric",
                                        month: "long",
                                        day: "numeric",
                                    },
                                )}
                            </p>
                            <h3 class="card-title hover:text-primary text-xl font-bold">
                                {news.data.title}
                            </h3>
                        </div>
                    </a>
                ))
            }
        </div>

        <div class="mt-12 text-center">
            <a href={l("/news")} class="btn btn-outline btn-primary">
                {
                    t({
                        ja: "すべてのニュースを見る",
                        en: "View All News",
                        zh: "查看所有消息",
                        ko: "모든 뉴스를 보기",
                    })
                }
            </a>
        </div>
    </div>
</section>
