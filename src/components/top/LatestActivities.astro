---
import { Image } from "astro:assets";
import { useTranslations } from "../../libs/i18n";

const { t, l, getCollection } = useTranslations(Astro.url);

const activities = await getCollection("activities");
---

<section class="bg-base-100 py-16">
    <div class="container mx-auto px-4">
        <div class="mb-12 text-center">
            <h2 class="text-base-content mb-4 text-3xl font-bold md:text-4xl">
                {
                    t({
                        ja: "最新の活動",
                        en: "Latest Activities",
                        zh: "最新活动",
                        ko: "최신 활동",
                    })
                }
            </h2>
            <p class="text-base-content/80 mx-auto max-w-3xl text-lg">
                {
                    t({
                        ja: "OUS Metaverseでの最近の取り組みやイベントをご紹介します。",
                        en: "Check out our recent initiatives and events at OUS Metaverse.",
                        zh: "了解我们在OUS Metaverse的最新倡议和活动。",
                        ko: "OUS Metaverse에서의 최근 활동과 이벤트를 확인하세요.",
                    })
                }
            </p>
        </div>

        <div class="grid gap-8 md:grid-cols-2 lg:grid-cols-3">
            {
                activities.slice(0, 3).map((activity) => (
                    <a
                        href={l(`/activities/${activity.slug}`)}
                        class="card bg-base-100 group shadow-md transition hover:shadow-lg"
                    >
                        <figure class="aspect-[16/9] overflow-hidden">
                            <Image
                                src={activity.data.image}
                                alt={activity.data.title}
                                class="h-full w-full object-cover transition-transform duration-300 group-hover:scale-105"
                            />
                        </figure>
                        <div class="card-body p-6">
                            <p class="text-sm opacity-70">
                                {new Date(activity.data.date).toLocaleDateString(
                                    Astro.currentLocale || "ja-JP",
                                    {
                                        year: "numeric",
                                        month: "long",
                                        day: "numeric",
                                    },
                                )}
                            </p>
                            <h3 class="card-title hover:text-primary text-xl font-bold">
                                {activity.data.title}
                            </h3>
                        </div>
                    </a>
                ))
            }
        </div>

        <div class="mt-12 text-center">
            <a href={l("/activities")} class="btn btn-outline btn-primary">
                {
                    t({
                        ja: "すべての活動を見る",
                        en: "View All Activities",
                        zh: "查看所有活动",
                        ko: "모든 활동 보기",
                    })
                }
            </a>
        </div>
    </div>
</section>
